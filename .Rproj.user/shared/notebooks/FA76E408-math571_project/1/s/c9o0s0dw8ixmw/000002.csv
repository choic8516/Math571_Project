"0","library(jsonlite)"
"0","library(magrittr)"
"0","library(tidyverse)"
"0","library(lubridate)"
"0","Connor_key <- ""5b15a6f528e7486cbd51dd2f47265d25"" # Please use your own API key. you can get it from nyt api website. "
"0","begin_date <- ymd(""19891231"") # set your beginning date"
"0","end_date <- ymd(""19900101"") # set you ending that which is only one day apart."
"0","temp_begin_date <- begin_date"
"0","temp_end_date <- end_date"
"0","selected_end_date <- ymd(""19900201"") # set the final end date for your search."
"0","# search limited to ""Financial"" articles"
"0","# This should result in higher correlation to stock price changes than having articles from sports and politics, etc. "
"0","# It was hard for me to random sample from too many number of pages. It will take forever. "
"0","# I ran this code for just one month but it still took awhile(1 min?). It will depend on you laptop performance but we can divide our work and it will be fine. "
"0","# If you can improve my code plz do and let us know of any improvements.  "
"0","while (temp_end_date <= selected_end_date) {"
"0","for (page in c(0:2)) {"
"0","        art <- fromJSON(paste0(""http://api.nytimes.com/svc/search/v2/articlesearch.json?begin_date="",temp_begin_date,""&end_date="",temp_end_date,""&api-key="",Connor_key,""&page="",page,""&fq=news_desk:(Financial)""), flatten = TRUE) %>%  data.frame()"
"0","        if (page == 0) {"
"0","                news_head <- c(as.character(temp_end_date),art$response.docs.headline.main)"
"0","        } else {"
"0","        news_head <- c(news_head,art$response.docs.headline.main)"
"0","        }"
"0","        Sys.sleep(1)"
"0","}"
"0","if (temp_begin_date == begin_date) {               "
"0","        headlines <- data.frame(t(news_head),stringsAsFactors = F)"
"0","} else {"
"0","        headlines <- rbind(headlines,data.frame(t(news_head)))"
"0","}"
"0","temp_begin_date <- temp_begin_date + 1"
"0","temp_end_date <-  temp_end_date + 1"
"0","}"
"2","
"
